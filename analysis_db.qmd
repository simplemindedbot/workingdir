Great—here’s the updated version of the Manual Export via Admin Console user story and acceptance criteria, incorporating your responses:

⸻

User Story: Filtered Manual Export of Analysis and Assertion Data via Admin Console

Title: Enable Filtered and Combinable Manual Export with Download to User Device

As an admin user
I want to filter and combine multiple criteria when exporting analysis and assertion data
So that I can retrieve exactly the subset I need and save the file directly to my computer, without storing it on the server.

⸻

Filter Capabilities (Combinable Filters):
	•	Date Range: Start Date to End Date
	•	WCIS ID: Supports exact or partial match
	•	Username: Text input with typeahead
	•	Analysis Status: Select from predefined values (Completed, Failed, Draft, etc.)
	•	Export Format: CSV or JSON

⸻

Behavioral Requirements:
	•	Filters may be combined in any way (e.g., WCIS ID + date range + status)
	•	If the result set exceeds 10,000 records, the system should:
	•	Display a warning
	•	Prompt the user to refine filters or confirm download of a truncated file (with a note in the file header/footer)
	•	Download should immediately stream to the user’s local device (no intermediate server save)

⸻

Acceptance Criteria (Gherkin):

Scenario: Combined export with multiple filters
Given I am logged into the admin console
When I enter a date range, WCIS ID, and select "Completed" status
And I choose JSON as the format
Then the system applies all filters
And returns only matching records
And initiates a download of the file to my computer

Scenario: Large export exceeds row limit
Given my filter criteria would return more than 10,000 records
When I initiate the export
Then the system displays a warning
And allows me to either cancel, refine filters, or proceed with a truncated export
And the export file clearly notes that it is truncated

Scenario: Format selection
Given I selected export format as CSV
Then the downloaded file is a valid CSV file containing the filtered records
And the filename includes a timestamp and key filters (e.g., `cbcimetrics_2024-01-01_to_2024-01-31_completed.csv`)


⸻

Technical Implementation Notes:
	•	File generation and filtering should happen on-demand via a single backend endpoint, with filter params sent as query/body parameters.
	•	Use streaming responses for large files to minimize browser and memory strain.
	•	Add a max row count config to the backend for future flexibility (e.g., allow up to 50,000 if needed with pagination or chunked download).
	•	Consider tracking download attempts in an audit log (future enhancement).

⸻

Would you like this story broken into technical subtasks (e.g., backend filter API, frontend UI, file streaming service)?

Q3 (from earlier): Should users be able to save export presets (e.g., “Daily WCIS Report”) for reuse, or is that out of scope for now?